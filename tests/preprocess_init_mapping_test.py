#!/usr/bin/env python3

import os
import sys

sys.path.append(os.path.join(os.path.dirname(__file__), ".."))

from preprocess import init_mapping

ALL_ZIPS = """11436
11213
11212
11225
11218
11226
11219
11210
11230
11204
10471
10470
10466
10467
10463
10475
10464
10469
10468
10458
10034
10033
10462
10040
10453
10465
10461
10457
10460
10032
10452
10456
10472
10031
10039
10459
10451
10473
10030
10027
10474
10455
10037
10024
10454
10026
10048
10025
11357
10029
11356
11359
11360
11105
10128
10023
11363
10028
11354
11102
11370
10021
11358
11362
10044
11369
11103
11106
11368
11377
11355
11101
11364
10018
10020
11005
10017
10001
10011
10016
11104
11109
10010
11367
10014
10003
11222
10002
11378
10009
10012
10013
10007
11237
11385
10038
11206
10006
11412
10005
11251
10004
11411
11201
11205
11208
11207
11413
11217
11238
11231
11422
11420
11417
11215
11232
11430
11203
11239
11236
11220
10301
10303
11234
10302
11209
10304
10314
11228
10305
11229
11214
11691
11223
11692
11235
10306
11694
11224
10308
11697
10312
10309
10307
10280
11372
11004
11040
11426
11365
11001
11375
11427
11374
11366
11423
11428
11432
11379
11429
11435
11415
11418
11433
11451
11221
11421
11419
11434
11216
11416
11233
10055
10019
10111
10153
10154
10152
10115
10022
10065
10075
10069
10281
10282
11211
11373
10279
10165
10168
10105
10118
10176
10170
10112
10122
10107
10103
10174
10166
10169
10167
10177
10172
10171
10270
10104
10271
10110
10175
10151
10173
10178
10121
10123
10106
10158
10041
10120
10278
10155
10043
10081
10096
10097
10196
10275
10265
10045
10080
10203
10259
10260
10285
10286
11371
11361
10036
11414
10310
11249
10162
10119
83"""

def test_basic():
    """modify init_mapping() signature before running test"""
    zip_codes, polygons = init_mapping('../data/zipcode.txt')

    assert(len(zip_codes) == 244)
    assert(len(polygons) == 244)

    all_zip_codes = ALL_ZIPS.split()
    all_zip_codes = map(lambda x: int(x), all_zip_codes)
    assert set(all_zip_codes) == set(zip_codes)
    print("{} passed".format(__file__))

if __name__ == "__main__":
    test_basic()
